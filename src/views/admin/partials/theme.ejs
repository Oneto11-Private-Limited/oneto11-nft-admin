<script>
    $(document).ready(function() {

        var $sidebar = $('.control-sidebar')
        var $container = $('<div />', {
            class: 'p-3 control-sidebar-content'
        })

        $sidebar.append($container)

        var navbar_dark_skins = [
            'navbar-primary',
            'navbar-secondary',
            'navbar-info',
            'navbar-success',
            'navbar-danger',
            'navbar-indigo',
            'navbar-purple',
            'navbar-pink',
            'navbar-navy',
            'navbar-lightblue',
            'navbar-teal',
            'navbar-cyan',
            'navbar-dark',
            'navbar-gray-dark',
            'navbar-gray',
        ]

        var navbar_light_skins = [
            'navbar-light',
            'navbar-warning',
            'navbar-white',
            'navbar-orange',
        ]

        $container.append(
            '<h5>Theme Settings</h5><hr class="mb-2"/>'
        )

        var $no_border_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-key": 'no_navbar_border',
            "data-value": "border-bottom-0",
            checked: $('.main-header').hasClass('border-bottom-0'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.main-header').addClass('border-bottom-0')
            } else {
                $('.main-header').removeClass('border-bottom-0')
            }
        })
        var $no_border_container = $('<div />', {
            'class': 'mb-1'
        }).append($no_border_checkbox).append('<span>No Navbar border</span>')
        $container.append($no_border_container)

        var $text_sm_body_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "text-sm",
            "data-key": 'body_small_text',
            checked: $('body').hasClass('text-sm'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('body').addClass('text-sm')
            } else {
                $('body').removeClass('text-sm')
            }
        })
        var $text_sm_body_container = $('<div />', {
            'class': 'mb-1'
        }).append($text_sm_body_checkbox).append('<span>Body small text</span>')
        $container.append($text_sm_body_container)

        var $text_sm_header_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "text-sm",
            "data-key": 'navbar_small_text',
            checked: $('.main-header').hasClass('text-sm'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.main-header').addClass('text-sm')
            } else {
                $('.main-header').removeClass('text-sm')
            }
        })
        var $text_sm_header_container = $('<div />', {
            'class': 'mb-1'
        }).append($text_sm_header_checkbox).append('<span>Navbar small text</span>')
        $container.append($text_sm_header_container)

        var $text_sm_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "text-sm",
            "data-key": 'sidebar_navbar_small_text',
            checked: $('.nav-sidebar').hasClass('text-sm'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.nav-sidebar').addClass('text-sm')
            } else {
                $('.nav-sidebar').removeClass('text-sm')
            }
        })
        var $text_sm_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($text_sm_sidebar_checkbox).append('<span>Sidebar nav small text</span>')
        $container.append($text_sm_sidebar_container)

        var $text_sm_footer_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "text-sm",
            "data-key": 'footer_small_text',
            checked: $('.main-footer').hasClass('text-sm'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.main-footer').addClass('text-sm')
            } else {
                $('.main-footer').removeClass('text-sm')
            }
        })
        var $text_sm_footer_container = $('<div />', {
            'class': 'mb-1'
        }).append($text_sm_footer_checkbox).append('<span>Footer small text</span>')
        $container.append($text_sm_footer_container)

        var $flat_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "nav-flat",
            "data-key": 'sidebar_nav_flat_style',
            checked: $('.nav-sidebar').hasClass('nav-flat'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.nav-sidebar').addClass('nav-flat')
            } else {
                $('.nav-sidebar').removeClass('nav-flat')
            }
        })
        var $flat_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($flat_sidebar_checkbox).append('<span>Sidebar nav flat style</span>')
        $container.append($flat_sidebar_container)

        var $legacy_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "nav-legacy",
            "data-key": 'sidebar_nav_legacy_style',
            checked: $('.nav-sidebar').hasClass('nav-legacy'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.nav-sidebar').addClass('nav-legacy')
            } else {
                $('.nav-sidebar').removeClass('nav-legacy')
            }
        })
        var $legacy_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($legacy_sidebar_checkbox).append('<span>Sidebar nav legacy style</span>')
        $container.append($legacy_sidebar_container)

        var $compact_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "nav-compact",
            "data-key": 'sidebar_nav_compact',
            checked: $('.nav-sidebar').hasClass('nav-compact'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.nav-sidebar').addClass('nav-compact')
            } else {
                $('.nav-sidebar').removeClass('nav-compact')
            }
        })
        var $compact_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($compact_sidebar_checkbox).append('<span>Sidebar nav compact</span>')
        $container.append($compact_sidebar_container)

        var $child_indent_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "nav-child-indent",
            "data-key": 'sidebar_nav_child_indent',
            checked: $('.nav-sidebar').hasClass('nav-child-indent'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.nav-sidebar').addClass('nav-child-indent')
            } else {
                $('.nav-sidebar').removeClass('nav-child-indent')
            }
        })
        var $child_indent_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($child_indent_sidebar_checkbox).append('<span>Sidebar nav child indent</span>')
        $container.append($child_indent_sidebar_container)

        var $no_expand_sidebar_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": "sidebar-no-expand",
            "data-key": 'sidebar-no-expand',
            checked: $('.main-sidebar').hasClass('sidebar-no-expand'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.main-sidebar').addClass('sidebar-no-expand')
            } else {
                $('.main-sidebar').removeClass('sidebar-no-expand')
            }
        })
        var $no_expand_sidebar_container = $('<div />', {
            'class': 'mb-1'
        }).append($no_expand_sidebar_checkbox).append('<span>Main Sidebar disable hover/focus auto expand</span>')
        $container.append($no_expand_sidebar_container)

        var $text_sm_brand_checkbox = $('<input />', {
            type: 'checkbox',
            value: 1,
            "data-value": 'text-sm',
            "data-key": 'brand_small_text',
            checked: $('.brand-link').hasClass('text-sm'),
            'class': 'mr-1 js-theme-setting'
        }).on('click', function() {
            if ($(this).is(':checked')) {
                $('.brand-link').addClass('text-sm')
            } else {
                $('.brand-link').removeClass('text-sm')
            }
        })
        var $text_sm_brand_container = $('<div />', {
            'class': 'mb-4'
        }).append($text_sm_brand_checkbox).append('<span>Brand small text</span>')
        $container.append($text_sm_brand_container)

        $container.append('<h6>Top Navbar Background <a data-key="reset:top_navbar_background" title="reset" data-value="navbar-white navbar-light" class="js-theme-setting text-danger" href="javascript:void(0)"> <i class="fa  fa-window-restore"></i></a></h6> ')

        var $navbar_variants = $('<div />', {
            'class': 'd-flex'
        })
        var navbar_all_colors = navbar_dark_skins.concat(navbar_light_skins)
        var $navbar_variants_colors = createSkinBlock(navbar_all_colors, 'top_navbar_background', function(e) {
            var color = $(this).data('color')
            var $main_header = $('.main-header')
            $main_header.removeClass('navbar-dark').removeClass('navbar-light')
            navbar_all_colors.map(function(color) {
                $main_header.removeClass(color)
            })

            if (navbar_dark_skins.indexOf(color) > -1) {
                $main_header.addClass('navbar-dark')
            } else {
                $main_header.addClass('navbar-light')
            }

            $main_header.addClass(color)
        })

        $navbar_variants.append($navbar_variants_colors)
        $container.append($navbar_variants)



        var sidebar_colors = [
            'bg-primary',
            'bg-warning',
            'bg-info',
            'bg-danger',
            'bg-success',
            'bg-indigo',
            'bg-lightblue',
            'bg-navy',
            'bg-purple',
            'bg-fuchsia',
            'bg-pink',
            'bg-maroon',
            'bg-orange',
            'bg-lime',
            'bg-teal',
            'bg-olive'
        ]

        var accent_colors = [
            'accent-primary',
            'accent-warning',
            'accent-info',
            'accent-danger',
            'accent-success',
            'accent-indigo',
            'accent-lightblue',
            'accent-navy',
            'accent-purple',
            'accent-fuchsia',
            'accent-pink',
            'accent-maroon',
            'accent-orange',
            'accent-lime',
            'accent-teal',
            'accent-olive',
            'accent-gray',
            'accent-white'
        ]

        var sidebar_skins = [
            'sidebar-dark-primary',
            'sidebar-dark-warning',
            'sidebar-dark-info',
            'sidebar-dark-danger',
            'sidebar-dark-success',
            'sidebar-dark-indigo',
            'sidebar-dark-lightblue',
            'sidebar-dark-navy',
            'sidebar-dark-purple',
            'sidebar-dark-fuchsia',
            'sidebar-dark-pink',
            'sidebar-dark-maroon',
            'sidebar-dark-orange',
            'sidebar-dark-lime',
            'sidebar-dark-teal',
            'sidebar-dark-olive',
            'sidebar-light-primary',
            'sidebar-light-warning',
            'sidebar-light-info',
            'sidebar-light-danger',
            'sidebar-light-success',
            'sidebar-light-indigo',
            'sidebar-light-lightblue',
            'sidebar-light-navy',
            'sidebar-light-purple',
            'sidebar-light-fuchsia',
            'sidebar-light-pink',
            'sidebar-light-maroon',
            'sidebar-light-orange',
            'sidebar-light-lime',
            'sidebar-light-teal',
            'sidebar-light-olive'
        ]
        $container.append('<h6>Sidebar Text Color <a data-key="reset" title="reset" data-value="side_bar_text_color" class="js-theme-setting text-danger" href="javascript:void(0)"> <i class="fa  fa-window-restore"></i></a></h6> ')
        var $accent_variants = $('<div />', {
            'class': 'd-flex'
        })
        $container.append($accent_variants)
        $container.append(createSkinBlock(accent_colors, 'side_bar_text_color', function() {
            var color = $(this).data('color')
            var accent_class = color
            var $body = $('body')
            accent_colors.map(function(skin) {
                $body.removeClass(skin)
            })
            $body.addClass(accent_class)
        }))

        $container.append('<h6>Dark Sidebar Variants<a data-key="reset" title="reset:dark_sidebar_variants" data-value="sidebar-dark-primary" class="js-theme-setting text-danger" href="javascript:void(0)"> <i class="fa  fa-window-restore"></i></a></h6>')
        var $sidebar_variants_dark = $('<div />', {
            'class': 'd-flex'
        })
        $container.append($sidebar_variants_dark)
        $container.append(createSkinBlock(sidebar_colors, 'dark_sidebar_variants', function() {
            var color = $(this).data('color')
            var sidebar_class = 'sidebar-dark-' + color.replace('bg-', '')
            var $sidebar = $('.main-sidebar')
            sidebar_skins.map(function(skin) {
                $sidebar.removeClass(skin)
            })

            $sidebar.addClass(sidebar_class)
        }))

        $container.append('<h6>Light Sidebar Variants<a data-key="reset" title="reset" data-value="light_sidebar_variants" class="js-theme-setting text-danger" href="javascript:void(0)"> <i class="fa  fa-window-restore"></i></a></h6>')
        var $sidebar_variants_light = $('<div />', {
            'class': 'd-flex'
        })
        $container.append($sidebar_variants_light)
        $container.append(createSkinBlock(sidebar_colors, 'light_sidebar_variants', function() {
            var color = $(this).data('color')
            var sidebar_class = 'sidebar-light-' + color.replace('bg-', '')
            var $sidebar = $('.main-sidebar')
            sidebar_skins.map(function(skin) {
                $sidebar.removeClass(skin)
            })

            $sidebar.addClass(sidebar_class)
        }))

        var logo_skins = navbar_all_colors
        $container.append('<h6>Brand Logo Variants <a data-key="reset" title="reset" data-value="brand_logo_variants" class="js-theme-setting text-danger" href="javascript:void(0)"> <i class="fa  fa-window-restore"></i></a></h6> ')
        var $logo_variants = $('<div />', {
            'class': 'd-flex'
        })
        $container.append($logo_variants)
            // var $clear_btn = $('<a />', {
            //     href: 'javascript:void(0)'
            // }).text('clear').on('click', function() {
            //     var $logo = $('.brand-link')
            //     logo_skins.map(function(skin) {
            //         $logo.removeClass(skin)
            //     })
            // })
        $container.append(createSkinBlock(logo_skins, 'brand_logo_variants', function() {
                var color = $(this).data('color')
                var $logo = $('.brand-link')
                logo_skins.map(function(skin) {
                    $logo.removeClass(skin)
                })
                $logo.addClass(color)
            })
            //.append($clear_btn)
        )
        $container.append(
            '<a class="btn btn-sm bg-red js-theme-setting btn-block mb-3" data-key="reset" data-value="all">Reset All</a>'
        )

        function createSkinBlock(colors, key, callback) {
            var $block = $('<div />', {
                'class': 'd-flex flex-wrap mb-3'
            })

            colors.map(function(color) {
                if (key == 'top_navbar_background') {
                    if (navbar_dark_skins.indexOf(color) > -1) {
                        var dataValue = 'navbar-dark ' + color
                    } else {
                        var dataValue = 'navbar-light ' + color
                    }
                } else if (key == 'dark_sidebar_variants') {
                    // key = key.replace('dark_', '');
                    dataValue = color.replace('bg', 'sidebar-dark');
                } else if (key == 'light_sidebar_variants') {
                    // key = key.replace('light_', '');
                    dataValue = color.replace('bg', 'sidebar-light');
                } else {
                    var dataValue = color
                }

                var $color = $('<div />', {
                    "data-key": key,
                    "data-value": dataValue,
                    'class': (typeof color === 'object' ? color.join(' ') : color).replace('navbar-', 'bg-').replace('accent-', 'bg-') + ' elevation-2 js-theme-setting'
                })

                $block.append($color)

                $color.data('color', color)

                $color.css({
                    width: '40px',
                    height: '20px',
                    borderRadius: '25px',
                    marginRight: 10,
                    marginBottom: 10,
                    opacity: 0.8,
                    cursor: 'pointer'
                })

                $color.hover(function() {
                    $(this).css({
                        opacity: 1
                    }).removeClass('elevation-2').addClass('elevation-4')
                }, function() {
                    $(this).css({
                        opacity: 0.8
                    }).removeClass('elevation-4').addClass('elevation-2')
                })

                if (callback) {
                    $color.on('click', callback)
                }
            })

            return $block
        }

        $(document).on('click', '.js-theme-setting', function() {
            if ($(this).attr('data-selected') == "true") {
                $(this).attr('data-selected', "false");
            } else {
                $(this).attr('data-selected', "true");
            }
            var key = $(this).attr('data-key');
            var value = $(this).attr('data-value'); // : 0) || $(this).attr('data-value');
            if ($(this).attr('data-selected') == 'false' && $(this).attr('type') == 'checkbox') {
                value = 0;
            }
            if (key == 'dark_sidebar_variants') {
                key = key.replace('dark_', '');
            } else if (key == 'light_sidebar_variants') {
                key = key.replace('light_', '');
            }
            $.ajax({
                method: 'post',
                data: {
                    key: key,
                    value: value
                },
                url: SITEURL + '/admin/theme/update',
                success: function(res) {
                    loaderHide();
                    if (res.status) {
                        if (typeof res.data.refresh != 'undefined' && res.data.refresh) {
                            window.location.reload();
                        } else {
                            toastr.success(res.message);
                        }
                    } else {
                        toastr.error(res.message);
                    }
                }
            })
        })
        var themeSetting = JSON.parse('<%- JSON.stringify(theme)%>');
        for (var i in themeSetting) {
            var selected = themeSetting[i].value == "0" ? "false" : "true";
            var checked = themeSetting[i].value == "0" ? false : true;
            $(document).find('[data-key="' + themeSetting[i].key + '"]').attr('data-selected', selected).prop('checked', checked)
        }
    })
</script>